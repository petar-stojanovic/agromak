<ion-header>
  <ion-toolbar>
    <ion-title>Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  @defer (when user !== null) {
    @if (user) {
      <div class="preview">
        <ion-avatar (click)="changeImage()">
          <img *ngIf="user.photoURL; else placeholder_avatar;" [src]="user.photoURL" alt="Profile Picture"/>

          <ng-template #placeholder_avatar>
            <div class="fallback">
              <p>Select avatar</p>
            </div>
          </ng-template>
        </ion-avatar>
      </div>

      <div class="text-center">
        <h2>{{ user.displayName }}</h2>
        <p>{{ user.email }}</p>
      </div>

      <ion-list class="background-white">
        <ion-list-header>General</ion-list-header>

        <ion-item>
          <ion-thumbnail class="flex ion-justify-content-center ion-align-items-center" slot="start">
            <ion-icon class="icon-color-dark-blue" name="person-outline"></ion-icon>
          </ion-thumbnail>
          <ion-label>
            <ion-text>
              <h2 class="font-weight-500">Edit Profile</h2>
            </ion-text>
            <ion-text color="medium">
              <p class="font-size-12">Change profile picture, number, name</p>
            </ion-text>
          </ion-label>

          <ion-icon slot="end" class="ion-margin-none" name="chevron-forward-outline"></ion-icon>

        </ion-item>

        <ion-item>
          <ion-thumbnail class="flex ion-justify-content-center ion-align-items-center" slot="start">
            <ion-icon class="icon-color-dark-blue" name="lock-closed"></ion-icon>
          </ion-thumbnail>
          <ion-label>
            <ion-text>
              <h2 class="font-weight-500">Change Password</h2>
            </ion-text>
            <ion-text color="medium">
              <p class="font-size-12">Update and strengthen your security</p>
            </ion-text>
          </ion-label>

          <ion-icon slot="end" name="chevron-forward-outline"></ion-icon>

        </ion-item>

      </ion-list>

      <ion-list class="background-white ion-margin-vertical">
        <ion-list-header>Preferences</ion-list-header>

        <ion-item lines="none" (click)="logOut()">
          <ion-thumbnail class="flex ion-justify-content-center ion-align-items-center background-danger" slot="start">
            <ion-icon color="danger" name="log-out-outline"></ion-icon>
          </ion-thumbnail>
          <ion-label>
            <ion-text color="danger">
              <h2 class="font-weight-500">Log Out</h2>
            </ion-text>
            <ion-text color="medium">
              <p class="font-size-12">Securely log out of Account</p>
            </ion-text>
          </ion-label>

          <ion-icon slot="end" name="chevron-forward-outline"></ion-icon>

        </ion-item>

      </ion-list>

    }
  } @placeholder (minimum 1000ms) {
    <div class="skeleton">
      <ion-thumbnail class="thumbnail-skeleton">
        <ion-skeleton-text [animated]="true"></ion-skeleton-text>
      </ion-thumbnail>
    </div>

    <ion-item class="ion-margin-bottom" lines="none">
      <ion-skeleton-text [animated]="true"></ion-skeleton-text>
      <ion-skeleton-text [animated]="true" style="width: 80%"></ion-skeleton-text>
    </ion-item>

  } @loading (after 100ms; minimum 1000ms) {
    <div class="text-center">
      <ion-spinner name="crescent"></ion-spinner>
    </div>
  } @error {
    <div class="text-center">
      <ion-text color="danger">
        There was an error loading the user profile
      </ion-text>
    </div>
  }


</ion-content>

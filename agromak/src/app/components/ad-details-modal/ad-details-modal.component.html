<ion-content>
  <div class="images">
    <ion-icon (click)="dismiss()" name="arrow-back" class="icon-back"></ion-icon>

    <ion-icon (click)="toggleFavorite()"
              [name]="isFavoriteAd ? 'heart' : 'heart-outline'"
              class="icon-favorite"></ion-icon>
    <swiper-container #swiper pagination>
      @for (image of ad.images; track image) {
        <swiper-slide>
          <img [src]="image" alt="image">
        </swiper-slide>
      } @empty {
        <swiper-slide>
          <img src="assets/images/no-image.png" alt="placeholder"/>
        </swiper-slide>
      }
      <div class="shadow"></div>
    </swiper-container>
  </div>

  <div class="ion-padding-horizontal">

    <ion-text>
      <h1 class="font-weight-bold">
        {{ ad.title }}
      </h1>
    </ion-text>

    <ion-text color="primary">
      <h2 class="font-weight-bold">
        {{ ad.price }} {{ ad.currency }}
      </h2>
    </ion-text>

    <div class="flex gap-1 ion-wrap ion-text-uppercase">
      <ion-badge>
        <ion-icon name="location-outline"></ion-icon>
        <ion-text> {{ ad.location }}</ion-text>
      </ion-badge>
      <ion-badge>
        <ion-icon name="calendar-outline"></ion-icon>
        <ion-text>{{ ad.uploadedAt.toDate() | date:'dd.MM.yyyy' }}</ion-text>
      </ion-badge>
      <ion-badge>
        <ion-icon name="information-circle-outline"></ion-icon>
        <ion-text>{{ ad.itemCondition }}</ion-text>
      </ion-badge>
      <ion-badge>
        <ion-icon name="eye-outline"></ion-icon>
        <ion-text>Views: {{ ad.viewCount }}</ion-text>
      </ion-badge>
    </div>

    <ion-text>
      <p>{{ ad.description }}</p>
    </ion-text>

    <ion-text>
      <p> Posted on: {{ ad.uploadedAt.toDate() | date:'dd.MM.yyyy' }}</p>
    </ion-text>


    @defer (when owner !== null) {
      @if (owner) {
        <ion-list class="user-info ion-margin-vertical">
          <ion-list-header>Seller details</ion-list-header>

          <ion-item>
            <ion-thumbnail slot="start">
              <img alt="Owner Photo" [src]="owner.photoURL"/>
            </ion-thumbnail>
            <ion-label>
              <ion-text>
                <h1>
                  {{ owner.displayName }}
                </h1>
              </ion-text>
              <ion-text color="medium">
                <h3>
                  {{ owner.email }}
                </h3>
              </ion-text>
            </ion-label>
          </ion-item>
        </ion-list>
      }
    } @placeholder {
      <div>
        OMG
      </div>
    }

    <ion-list class="user-info ion-margin-vertical">
      <ion-list-header>Seller details</ion-list-header>

      <ion-item lines="none" class="flex">
        <ion-text class="flex ion-align-items-center">
          <ion-icon name="person-outline"></ion-icon>
          <span class="font-weight-500">{{ ad.ownerName ? ad.ownerName : "unknown" }}</span>
        </ion-text>
      </ion-item>

      <ion-item lines="none" class="flex">
        <ion-text class="flex ion-align-items-center">
          <ion-icon name="call-outline"></ion-icon>
          <span>{{ ad.phone }}</span>
        </ion-text>

      </ion-item>

      <ion-item lines="none" class="flex">
        <ion-text class="flex ion-align-items-center">
          <ion-icon name="location-outline"></ion-icon>
          <span>{{ ad.location }}</span>
        </ion-text>

      </ion-item>
    </ion-list>
  </div>

</ion-content>
